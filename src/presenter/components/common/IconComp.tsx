import { Link } from "react-router-dom";
import { Home, KeyboardDoubleArrowDown, PartnerExchange, Search, Event, Dashboard, Ballot, Add, Person, CalendarAddOn, Flag2, ExitToApp, ExploreNearby, Visibility, ArrowCircleRight, Notifications, ArrowCircleRightFilled, ThumbUp, ThumbUpFilled, HomeFilled, PersonFilled, CircleNotifications, CircleNotificationsFilled, PersonEdit, PersonEditFilled, Diversity3, Diversity3Filled, TwoPager, TwoPagerFilled, AddCircleFilled, AddCircle, DoNotDisturbOnFilled, DoNotDisturbOn, ArrowForwardIos, ArrowBackIos, CalendarViewMonth, CalendarViewMonthFilled, SearchFilled, ArrowForwardIosFilled, ArrowBackIosFilled, NotificationsFilled, VisibilityFilled, ExploreNearbyFilled, ExitToAppFilled, Flag2Filled, CalendarAddOnFilled, AddFilled, BallotFilled, DashboardFilled, EventFilled, PartnerExchangeFilled, KeyboardDoubleArrowDownFilled, TollFilled, Toll, ArrowDropDownFilled, ArrowDropDown, CalendarMonth, CalendarMonthFilled, ListFilled, List, CancelFilled, Cancel, CheckCircleFilled, CheckCircle, SmartCardReaderFilled, SmartCardReader, SignalCellularAltFilled, SignalCellularAlt, DesignServicesFilled, DesignServices, CloseFilled, Close, ChevronRight, ChevronRightFilled, MoreUp, MoreUpFilled, ExpandContentFilled, ExpandContent, EditFilled, Edit, GroupsFilled, Groups, PersonCancelFilled, PersonCancel, AddAPhoto, AddAPhotoFilled, VisibilityOffFilled, VisibilityOff, DistanceFilled, Distance, PersonPinCircleFilled, PersonPinCircle, SyncProblemFilled, SyncProblem, KeyboardDoubleArrowUp, KeyboardDoubleArrowUpFilled, SendFilled, Send, ForumFilled, Forum, NearMeFilled, NearMe, Sms, SmsFilled, MoodFilled, Mood, MyLocationFilled, MyLocation, CallFilled, Call, Mail, MailFilled, TodayFilled, Today, LocationOn, LocationOnFilled, ClearAllFilled, ClearAll, CheckFilled, Check, Block, BlockFilled, SaveFilled, Save, SortFilled, Sort, SortByAlphaFilled, SortByAlpha, ArrowDropUpFilled, ArrowDropUp, DeleteFilled, Delete, UndoFilled, Undo, RefreshFilled, Refresh, MoveUpFilled, MoveUp, MoveDownFilled, MoveDown, ArrowUpward, ArrowUpwardFilled, ChatFilled, Chat, SaveAsFilled, SaveAs } from '@project-lary/react-material-symbols-300-rounded';


export const iconMap = {
    add: { filled: AddFilled, default: Add },
    add_a_photo: { filled: AddAPhotoFilled, default: AddAPhoto },
    add_circle: { filled: AddCircleFilled, default: AddCircle },
    arrow_back_ios: { filled: ArrowBackIosFilled, default: ArrowBackIos },
    arrow_circle_right: { filled: ArrowCircleRightFilled, default: ArrowCircleRight },
    arrow_drop_down: { filled: ArrowDropDownFilled, default: ArrowDropDown },
    arrow_drop_up: { filled: ArrowDropUpFilled, default: ArrowDropUp },
    arrow_forward_ios: { filled: ArrowForwardIosFilled, default: ArrowForwardIos },
    arrow_upward: { filled: ArrowUpwardFilled, default: ArrowUpward },
    ballot: { filled: BallotFilled, default: Ballot },
    block: { filled: BlockFilled, default: Block },
    calendar_add_on: { filled: CalendarAddOnFilled, default: CalendarAddOn },
    calendar_month: { filled: CalendarMonthFilled, default: CalendarMonth },
    calendar_view_month: { filled: CalendarViewMonthFilled, default: CalendarViewMonth },
    call: { filled: CallFilled, default: Call },
    cancel: { filled: CancelFilled, default: Cancel },
    chat: { filled: ChatFilled, default: Chat },
    check: { filled: CheckFilled, default: Check },
    check_circle: { filled: CheckCircleFilled, default: CheckCircle },
    chevron_right: { filled: ChevronRightFilled, default: ChevronRight },
    circle_notifications: { filled: CircleNotificationsFilled, default: CircleNotifications },
    clear_all: { filled: ClearAllFilled, default: ClearAll },
    close: { filled: CloseFilled, default: Close },
    dashboard: { filled: DashboardFilled, default: Dashboard },
    distance: { filled: DistanceFilled, default: Distance },
    design_services: { filled: DesignServicesFilled, default: DesignServices },
    delete: { filled: DeleteFilled, default: Delete },
    diversity_3: { filled: Diversity3Filled, default: Diversity3 },
    do_not_disturb_on: { filled: DoNotDisturbOnFilled, default: DoNotDisturbOn },
    edit: { filled: EditFilled, default: Edit },
    event: { filled: EventFilled, default: Event },
    exit_to_app: { filled: ExitToAppFilled, default: ExitToApp },
    expand_content: { filled: ExpandContentFilled, default: ExpandContent },
    explore_nearby: { filled: ExploreNearbyFilled, default: ExploreNearby },
    flag_2: { filled: Flag2Filled, default: Flag2 },
    forum: { filled: ForumFilled, default: Forum },
    groups: { filled: GroupsFilled, default: Groups },
    home: { filled: HomeFilled, default: Home },
    keyboard_double_arrow_down: { filled: KeyboardDoubleArrowDownFilled, default: KeyboardDoubleArrowDown },
    keyboard_double_arrow_up: { filled: KeyboardDoubleArrowUpFilled, default: KeyboardDoubleArrowUp },
    list: { filled: ListFilled, default: List },
    location_on: { filled: LocationOnFilled, default: LocationOn },
    mail: { filled: MailFilled, default: Mail },
    mood: { filled: MoodFilled, default: Mood },
    more_up: { filled: MoreUpFilled, default: MoreUp },
    move_up: { filled: MoveUpFilled, default: MoveUp },
    move_down: { filled: MoveDownFilled, default: MoveDown },
    my_location: { filled: MyLocationFilled, default: MyLocation },
    near_me: { filled: NearMeFilled, default: NearMe },
    notifications: { filled: NotificationsFilled, default: Notifications },
    partner_exchange: { filled: PartnerExchangeFilled, default: PartnerExchange },
    person: { filled: PersonFilled, default: Person },
    person_cancel: { filled: PersonCancelFilled, default: PersonCancel },
    person_edit: { filled: PersonEditFilled, default: PersonEdit },
    person_pin_circle: { filled: PersonPinCircleFilled, default: PersonPinCircle },
    refresh: { filled: RefreshFilled, default: Refresh },
    save: { filled: SaveFilled, default: Save },
    save_as: { filled: SaveAsFilled, default: SaveAs },
    search: { filled: SearchFilled, default: Search },
    signal_cellular_alt: { filled: SignalCellularAltFilled, default: SignalCellularAlt },
    sort: { filled: SortFilled, default: Sort },
    sort_by_alpha: { filled: SortByAlphaFilled, default: SortByAlpha },
    smart_card_reader: { filled: SmartCardReaderFilled, default: SmartCardReader },
    sms: { filled: SmsFilled, default: Sms },
    sync_problem: { filled: SyncProblemFilled, default: SyncProblem },
    send: { filled: SendFilled, default: Send },
    thumb_up: { filled: ThumbUpFilled, default: ThumbUp },
    today: { filled: TodayFilled, default: Today },
    toll: { filled: TollFilled, default: Toll },
    two_pager: { filled: TwoPagerFilled, default: TwoPager },
    undo: { filled: UndoFilled, default: Undo },
    visibility: { filled: VisibilityFilled, default: Visibility },
    visibility_off: { filled: VisibilityOffFilled, default: VisibilityOff },
};

function searchIcon(icon: string, fill?: boolean): JSX.Element {
    const IconComponent = iconMap[icon as keyof typeof iconMap];
    if (!IconComponent) return <>{icon}</>;
    return fill ? <IconComponent.filled /> : <IconComponent.default />;
}

type IconProps = {
    icon: keyof typeof iconMap | string,
    style?: string,
    fill?: boolean,
    size?: string,
    onClick?: () => void,
    color?: string,
    bg?: boolean,
    title?: string,
    link?: string,
    disabled?: boolean
    clear?: boolean,
}

export const Icon: React.FC<IconProps> = ({ title, disabled, onClick, icon, size = "2xl", style, link, fill, clear, ...props }) => {

    const sizeMap: any = {
        'sm': { text: '14', class: 'iconSm' },
        'md': { text: '18', class: 'iconMd' },
        'lg': { text: '22', class: 'iconLg' },
        'xl': { text: '26', class: 'iconXl' },
        '2xl': { text: '30', class: 'icon2xl' },
        '3xl': { text: '34', class: 'icon3xl' },
        '4xl': { text: '38', class: 'icon4xl' },
        '5xl': { text: '42', class: 'icon5xl' },
    };
    const num = sizeMap[size as keyof typeof sizeMap]?.text ?? '30';
    const classRounded = sizeMap[size as keyof typeof sizeMap]?.class ?? 'icon2xl';
    const textSize = ` text-[${num}px]  `;

    const color = props.color ?? 'gray'
    const textColor = props.color ? props.bg ? `text-${color}-500 ` : `text-${color}-700 ` : `text-gray-800 `;
    const bg = (props.bg && !clear) ?
        (props.color ? `bg-${color}-500 bg-opacity-30 border border-${color}-500 border-opacity-20` : `!bg-gray-300 hover:!bg-gray-200 border border-gray-500 border-opacity-20`) : ''

    const classIcon = `forced-color-adjust-auto !rounded-full  flex items-center justify-center  ${textColor} ${bg} 
     ${props.bg ? classRounded : textSize} ${style ?? ''} `

    const classActive = `hover:scale-[1.1] transition-all duration-200 ease-in-out hover:!bg-${color}-500 `

    return (
        <div
            className={`${(props.bg && !clear) ? 'max-h-max max-w-max bg-white' : ''} rounded-full  `}>
            {onClick ?
                <button
                    style={{ fontSize: `${num}px` }}
                    data-cy={icon}
                    type="button"
                    onClick={onClick}
                    title={!disabled ? title : title + ' est desactivÃ©e'}
                    className={`${classIcon} ${!disabled && classActive} `}
                    disabled={disabled}>
                    {searchIcon(icon, fill)}
                </button>
                : link ? <Link
                    style={{ fontSize: `${num}px` }}
                    data-cy={icon}
                    to={link}
                    title={title}
                    target={link.startsWith('http') ? "_blank" : ""}
                    rel="noopener noreferrer"
                    className={`${classIcon} ${classActive}`}>
                    {searchIcon(icon, fill)}
                </Link> :
                    <span
                        style={{ fontSize: `${num}px` }}
                        data-cy={icon}
                        title={title}
                        className={`${classIcon} `}>
                        <span>{searchIcon(icon, fill)}</span>
                    </span>
            }
        </div>)
}
